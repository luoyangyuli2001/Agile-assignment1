"use strict";(self.webpackChunkmovies=self.webpackChunkmovies||[]).push([[669],{6669:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var i=n(2791),t=n(3755),a=n(885),o=n(2312),l=n(7205),s=n(4149),u=n(9407),c=n(4565),d=n(6015),v=n(9195),h=n(1647),m=n(1508),x=n(7689),f=n(184),g=[{value:5,label:"Excellent"},{value:4,label:"Good"},{value:3,label:"Average"},{value:2,label:"Poor"},{value:0,label:"Terrible"}],b={root:{marginTop:2,display:"flex",flexDirection:"column",alignItems:"left"},form:{width:"100%","& > * ":{marginTop:2}},textField:{width:"40ch"},submit:{marginRight:2},snack:{width:"50%","& > * ":{width:"100%"}}},j=function(e){var r=e.movie,n=(0,i.useContext)(o.m),t=(0,i.useState)(3),j=(0,a.Z)(t,2),p=j[0],w=j[1],Z=(0,i.useState)(!1),C=(0,a.Z)(Z,2),y=C[0],k=C[1],R=(0,x.s0)(),S=(0,v.cI)({author:"",review:"",agree:!1,rating:"3"}),T=S.control,q=S.formState.errors,I=S.handleSubmit,Q=S.reset,V=function(e){k(!1),R("/movies/favorites")},A=function(e){w(e.target.value)};return(0,f.jsxs)(d.Z,{component:"div",sx:b.root,children:[(0,f.jsx)(c.Z,{component:"h2",variant:"h3",children:"Write a review"}),(0,f.jsx)(h.Z,{sx:b.snack,anchorOrigin:{vertical:"top",horizontal:"right"},open:y,onClose:V,children:(0,f.jsx)(m.Z,{severity:"success",variant:"filled",onClose:V,children:(0,f.jsx)(c.Z,{variant:"h4",children:"Thank you for submitting a review"})})}),(0,f.jsxs)("form",{sx:b.form,onSubmit:I((function(e){e.movieId=r.id,e.rating=p,n.addReview(r,e),k(!0)})),noValidate:!0,children:[(0,f.jsx)(v.Qr,{name:"author",control:T,rules:{required:"Name is required"},defaultValue:"",render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,f.jsx)(s.Z,{sx:{width:"40ch"},variant:"outlined",margin:"normal",required:!0,onChange:n,value:i,id:"author",label:"Author's name",name:"author",autoFocus:!0})}}),q.author&&(0,f.jsx)(c.Z,{variant:"h6",component:"p",children:q.author.message}),(0,f.jsx)(v.Qr,{name:"review",control:T,rules:{required:"Review cannot be empty.",minLength:{value:10,message:"Review is too short"}},defaultValue:"",render:function(e){var r=e.field,n=r.onChange,i=r.value;return(0,f.jsx)(s.Z,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"review",value:i,onChange:n,label:"Review text",id:"review",multiline:!0,minRows:10})}}),q.review&&(0,f.jsx)(c.Z,{variant:"h6",component:"p",children:q.review.message}),(0,f.jsx)(v.Qr,{control:T,name:"rating",render:function(e){var r=e.field;r.onChange,r.value;return(0,f.jsx)(s.Z,{id:"select-rating",select:!0,variant:"outlined",label:"Rating Select",value:p,onChange:A,helperText:"Don't forget your rating",children:g.map((function(e){return(0,f.jsx)(u.Z,{value:e.value,children:e.label},e.value)}))})}}),(0,f.jsxs)(d.Z,{sx:b.buttons,children:[(0,f.jsx)(l.Z,{type:"submit",variant:"contained",color:"primary",sx:b.submit,children:"Submit"}),(0,f.jsx)(l.Z,{type:"reset",variant:"contained",color:"secondary",sx:b.submit,onClick:function(){Q({author:"",content:""})},children:"Reset"})]})]})]})},p=n(1933),w=n(3030),Z=n(9515),C=function(e){var r=(0,x.TH)().state.movieId,n=(0,p.useQuery)(["movie",{id:r}],w.HI),i=n.data,a=n.error,o=n.isLoading,l=n.isError;return o?(0,f.jsx)(Z.Z,{}):l?(0,f.jsx)("h1",{children:a.message}):(0,f.jsx)(t.Z,{movie:i,children:(0,f.jsx)(j,{movie:i})})}}}]);
//# sourceMappingURL=669.9e4705d2.chunk.js.map